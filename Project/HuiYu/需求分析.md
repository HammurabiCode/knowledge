- 二维建模

	![](http://ooovptqjc.bkt.clouddn.com/%E4%BA%8C%E7%BB%B4%E5%BB%BA%E6%A8%A1%E8%8F%9C%E5%8D%95.png)

	- 杆件
		- 切割关系如何处理
	- 连接
		- 平面连接件
			- 实现方式：采用三维的图块
			- Note
				* 尺寸是否是固定的？
				* 是否要考虑截面的关系
				* 这个连接件是用来干嘛的？只是显示？还是要参与计算？
		- 转角连接件
			- 连接且仅连接到两个杆件
		- 三维连接件
			- 部分连接件涉及到两个杆件
	- 梁夹
		- 和设备

	- 底托与支座：其实只有底托，
		- 能否理解成只能加在特定位置（杆件端点或相交的地方）的设备
		
	- 梁夹
	- 设备
	- 荷载和支座
	- 

	- Note
		- 平面连接件、三维连接件、梁夹和所有设备（管道、电缆桥梁、动力照明电缆桥梁、母线槽、原型风管、矩形风管），在布置的时候有共同点：
			- 需要捕捉，定位到构件表面的点
			- 与对应的构件建立关联
			- 从图块读取出图形，然后加入到榀模板
		- 转角连接件的布置：
			- 需要两个构件相交，且不同的转角连接件形式，对相交的角度有要求
		- 底托与的布置：
			- 需要


工作流程：
	- 杆件布置及二维参数化
	- 文档切换及二维三维切换
		- 二维与三维互换：采用图层进行
			- 图层的属性：冻结，则不会regen；off则不显示；lock则不会被修改

	- 计算部分的耦合
	- 截面库材料库
	- 关联表格建立


问题：
	- 0518：
		- 类ModelParam中放入哪些数据？已有截面库、材料库
		- ModelParam派生出新的类？
		- 今日总结与明日汇报：
			- 目的：为了知道每个文件是什么类型的模型，针对每个类型，创建对应的Model子类的对象
			- 所有模型的基类Model
			- 智能指针的继承关系




关于类名
	- Model：表示一个模型，里面包含一个模型的所有数据，杆件、榀模板、榀、截面库、材料库、荷载、支座
	- DocManager：文档管理器，负责添加反应器，并在文档切换的时候修改当前的Model
	- Bar：杆件
	- Rack：平面支架，在三维模型中
	- RackTemplate：支架模板
	- Sector：截面
	- SecLib: 截面库
	- SecGroup：截面组
	- Material：材性
	- MatLib：材料库
	- Connector：连接件
	- Device：设备
	- Collet：底托
	- Clamp：梁夹
	- Label：标注
	- Tube：管道
	- Support：支座
	- Load：荷载

可以使用C++实现反射机制，来对不同的模型（门钢前处理、门钢后处理、慧鱼、网架等）创建ModelParam的子类对象。
- 几种获取文档类型的方式：
	- TJpDoc中的菜单ID
	- 文档的数据库里面是否有特定的构件类型
	- 文档里面Model子类的类型（新增）
- 注意：
	- 菜单的ID、文档类型名称（CString）、Model子类的对应关系
- 解决方案：
	- 打开文件的时候，
- 无菜单ID，且无法通过构件类型判断（构件判断相互矛盾），则在最终保存的时候，设置菜单ID和对应的Model子类。
- 无菜单ID，但可以通过构件类型判断，则通过构件类型来判断确定。
- 有菜单ID，但与构件不符合，
- 打开文件：
	1. 根据字典内的Model对象判断类型。
	2. 如果上一步失败，则通过菜单ID来判断类型，并和模型进行检查。最终确定，并创建相应的对象。
	3. 如果第一步成功，则确定


- 0612: CListCtrl的选中，但没有显示的问题。